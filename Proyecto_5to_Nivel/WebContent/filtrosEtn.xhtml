<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<link rel="StyleSheet" href="estilos/listadoUsuarios.css"
		type="text/css" />
	<title>Étnia Vs Año</title>
</h:head>

<h:body>
	<div id="cabecera" class="cabecera">
		<img style="width: 280px; height: 140px;" src="imagenes/logo.png"
			align="left" />
		<div style="height: 80px;">
			Data Report EC<br /> Estadística de Nacimientos en el Ecuador<br />
		</div>
		<center>
			<nav>
			<ul>
				<li><a href="MenuUsuario.xhtml">MENU PRINCIPAL</a></li>
				
				<li><a href="cambioContraUser.xhtml">ACTUALIZAR CONTRASEÑA</a></li>
				
				<li><a href="menuReportes.xhtml">VER REPORTES</a></li>
				
				<li><a href="login.xhtml">CERRAR SESIÓN</a></li>
			</ul>
			</nav>
		</center>
	</div>
	<br />
	<br />
	<div align="center">
	
	<h:form id="frmFiltro">
		<p:panel header="Filtros de busqueda">
			<p:panelGrid>
				<p:row>
					<p:column>Seleccione Étnia:</p:column>
					<p:column>
						<p:selectOneMenu id="somEtnia" required="true"
							value="#{graficosControl.codEtnia}">
							<f:selectItems value="#{graficosControl.listaEtnia}" />
						</p:selectOneMenu>
						<p:message for="somEtnia" />
					</p:column>
				</p:row>
				<p:row>
					<p:column>Año Inicial de Búsqueda:</p:column>
					<p:column>
						<p:selectOneMenu id="somAnio1" required="true"
							value="#{graficosControl.anio1}">
							<f:selectItems value="#{graficosControl.listaAnios}" />
						</p:selectOneMenu>
						<p:message for="somAnio1" />
					</p:column>
				</p:row>
				<p:row>
					<p:column>Año Final de Búsqueda:</p:column>
					<p:column>
						<p:selectOneMenu id="somAnio2" required="true"
							value="#{graficosControl.anio2}">
							<f:selectItems value="#{graficosControl.listaAnios}" />
						</p:selectOneMenu>
						<p:message for="somAnio2" />
					</p:column>
				</p:row>
				<p:row>
					<p:column colspan="2">
						<p:commandButton icon="ui-icon-search" title="Buscar"
							value="Buscar" actionListener="#{graficosControl.buscarEtnia()}"
							process="@form" update=":frmResultado,:frmFiltro" />
					</p:column>
				</p:row>
			</p:panelGrid>
		</p:panel>
	</h:form>
	
	</div>
	
	<h:form id="frmResultado">
		<p:panel header="Resultado">
			<h:outputText value="#{graficosControl.resultado}" />
			<p:dataTable rows="5" paginator="true" paginatorPosition="bottom"
				value="#{graficosControl.reporteetnia}" var="rep">
				<p:column headerText="Étnia">
					<h:outputText value="#{rep.datos}" />
				</p:column>
				<p:column headerText="Número de personas">
					<h:outputText value="#{rep.contador}" />
				</p:column>
			</p:dataTable>
			
			<div align="center">
				<p:chart type="pie" model="#{graficosControl.torta2}"
					style="width:800px;height:500px"
					rendered="#{graficosControl.torta2 != null}" />
			</div>

		</p:panel>

	</h:form>
		<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

	<a href="graficoPrvsAr.xhtml"><button>
			<h4>Descargar en Formato de Reporte</h4>
		</button></a>  &nbsp;&nbsp;&nbsp;&nbsp;

		<a href="reportCar.xhtml"><button>
			<h4>Regresar a Filtros por Características</h4>
		</button></a> &nbsp;&nbsp;&nbsp;&nbsp;
		
		<a href="menuReportes.xhtml"><button>
			<h4>Regresar al Menú de Reportes</h4>
		</button></a>
	<br />
	<br />
	<br />
	<br />
	<div id="pie" class="footer">
		<b>Data Report EC 2020</b> <img src="imagenes/licencia.png"
			align="top" style="width: 90px; height: 25px;" /> <a
			href="repositorio.xhtml">Más Información</a> <br /> <b>Licencia:
		</b>CC-BY-NC-SA <b> Autores:</b> Richard Camacho - Edwin Hernández -
		Alisson Vizcaíno.
	</div>
</h:body>
</html>